### جدول اصلاح موارد نقض

حسین شریعتی

| اصل | کلاس تغییر یافته | مشکل در نسخه قبلی | اقدام اصلاحی / رفع نقض |
|------|------------------|--------------------|--------------------------|
| **SRP** | `ReservationService` | این کلاس مسئولیت‌های متعددی داشت شامل مدیریت رزرو، اعمال تخفیف، پردازش پرداخت، تولید فاکتور و ارسال اعلان. این ترکیب مسئولیت‌ها باعث نقض اصل مسئولیت یگانه می‌شد. | منطق رزرو به متدهای جداگانه تقسیم شد: `applyLocationBasedDiscount()`، `executePaymentProcess()`، `generateInvoice()` و `sendConfirmationNotification()`. هر متد تنها یک وظیفه مشخص دارد و کلاس به عنوان هماهنگ‌کننده عمل می‌کند. |
| **OCP** | `PaymentProcessor` | برای افزودن روش پرداخت جدید، نیاز به تغییر در کلاس `ReservationService` و `PaymentProcessor` بود. این یعنی کلاس‌ها نسبت به توسعه بسته بودند. | تصمیم‌گیری در مورد نوع پرداخت به داخل کلاس `PaymentProcessor` منتقل شد و از Enum `PaymentMethods` استفاده می‌شود. حالا می‌توان روش‌های جدید پرداخت را تنها با افزودن case جدید در متد `executePayment()` اضافه کرد بدون نیاز به تغییر کد موجود. |
| **LSP** | `LuxuryRoom` ← `Room` | کلاس `LuxuryRoom` رفتار متفاوتی در محاسبه قیمت داشت که باعث می‌شد جایگزینی آن با `Room` مشکل ایجاد کند. | متد `calculateTotal()` در `LuxuryRoom` به‌گونه‌ای بازنویسی شد که ابتدا قیمت پایه را از کلاس والد محاسبه می‌کند و سپس هزینه اضافی luxury را اضافه می‌کند. حالا هر دو کلاس رفتار سازگاری دارند و اصل جانشینی رعایت شده است. |
| **ISP** | `MessageSender`, `EmailSender`, `SmsSender` | اینترفیس `MessageSender` در نسخه قبلی متدهای متعددی داشت که همه کلاس‌های پیاده‌کننده مجبور بودند آن‌ها را پیاده‌سازی کنند حتی اگر استفاده نمی‌کردند. | اینترفیس به یک متد واحد `deliver()` ساده‌سازی شد. کلاس‌های `EmailSender` و `SmsSender` هرکدام پیاده‌سازی خاص خود را دارند و فقط متد مورد نیاز را پیاده‌سازی می‌کنند. اصل جداسازی رابط‌ها رعایت شده است. |


